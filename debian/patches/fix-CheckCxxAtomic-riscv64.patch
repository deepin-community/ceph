Description: Fix CheckCxxAtomic to detect more accurately
 Some platforms like riscv64 does not have full support for atomic primitives,
 yet passes the test. Adding operator++ fixes this issue.
Author: Eric Long <i@hack3r.moe>
Last-Update: 2022-08-30
Index: ceph/cmake/modules/CheckCxxAtomic.cmake
===================================================================
--- ceph.orig/cmake/modules/CheckCxxAtomic.cmake
+++ ceph/cmake/modules/CheckCxxAtomic.cmake
@@ -47,7 +47,7 @@ int main() {
   std::atomic<uint16_t> w2;
   std::atomic<uint32_t> w4;
   std::atomic<uint64_t> w8;
-  return w1 + w2 + w4 + w8;
+  return ++w1 + ++w2 + ++w4 + ++w8;
 }
 " ${var})
 endfunction(check_cxx_atomics)
